<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.5.0_16) on Tue Mar 03 23:35:40 EST 2009 -->
<TITLE>
BufMgr
</TITLE>

<META NAME="keywords" CONTENT="bufmgr.BufMgr class">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    parent.document.title="BufMgr";
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/BufMgr.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../index-files/index-1.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;PREV CLASS&nbsp;
&nbsp;NEXT CLASS</FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../index.html?bufmgr/BufMgr.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="BufMgr.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
bufmgr</FONT>
<BR>
Class BufMgr</H2>
<PRE>
java.lang.Object
  <IMG SRC="../resources/inherit.gif" ALT="extended by "><B>bufmgr.BufMgr</B>
</PRE>
<DL>
<DT><B>All Implemented Interfaces:</B> <DD>global.GlobalConst</DD>
</DL>
<HR>
<DL>
<DT><PRE>public class <B>BufMgr</B><DT>extends java.lang.Object<DT>implements global.GlobalConst</DL>
</PRE>

<P>
Class: BufMgr
 Description: This class defines the buffer manager and its methods.
<P>

<P>
<HR>

<P>
<!-- =========== FIELD SUMMARY =========== -->

<A NAME="field_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Field Summary</B></FONT></TH>
</TR>
</TABLE>
&nbsp;<A NAME="fields_inherited_from_class_global.GlobalConst"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Fields inherited from interface global.GlobalConst</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>INVALID_PAGE, MAX_NAME, MAX_SPACE, MAXATTRNAME, MAXFILENAME, MAXINDEXNAME, MINIBASE_BUFFER_POOL_SIZE, MINIBASE_DB_SIZE, MINIBASE_DEFAULT_SHAREDMEM_SIZE, MINIBASE_MAX_TRANSACTIONS, MINIBASE_MAXARRSIZE, MINIBASE_PAGESIZE, NUMBUF</CODE></TD>
</TR>
</TABLE>
&nbsp;
<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../bufmgr/BufMgr.html#BufMgr(int, java.lang.String)">BufMgr</A></B>(int&nbsp;numbufs,
       java.lang.String&nbsp;replacerArg)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Constructor for BufMgr
 
 The buffer manager class, it allocates new pages for the buffer pool, pins
 and unpins the frame, frees the frame page, and uses the replacement
 algorithm to replace the page.</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../bufmgr/BufMgr.html#flushAllPages()">flushAllPages</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Flushes all pages of the buffer pool to disk</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../bufmgr/BufMgr.html#flushPage(global.PageId)">flushPage</A></B>(global.PageId&nbsp;pageid)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Added to flush a particular page of the buffer pool to disk</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;bufmgr.Frame[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../bufmgr/BufMgr.html#frameTable()">frameTable</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A few routines currently need direct access to the FrameTable.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../bufmgr/BufMgr.html#freePage(global.PageId)">freePage</A></B>(global.PageId&nbsp;globalPageId)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;User should call this method if she needs to delete a page.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../bufmgr/BufMgr.html#getNumBuffers()">getNumBuffers</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Gets the total number of buffers.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../bufmgr/BufMgr.html#getNumUnpinnedBuffers()">getNumUnpinnedBuffers</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Gets the total number of unpinned buffer frames.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;global.PageId</CODE></FONT></TD>
<TD><CODE><B><A HREF="../bufmgr/BufMgr.html#newPage(diskmgr.Page, int)">newPage</A></B>(<A HREF="../diskmgr/Page.html" title="class in diskmgr">Page</A>&nbsp;firstpage,
        int&nbsp;howmany)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Call DB object to allocate a run of new pages and find a frame in the
 buffer pool for the first page and pin it.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../bufmgr/BufMgr.html#pinPage(global.PageId, diskmgr.Page, boolean)">pinPage</A></B>(global.PageId&nbsp;pin_pgid,
        <A HREF="../diskmgr/Page.html" title="class in diskmgr">Page</A>&nbsp;page,
        boolean&nbsp;emptyPage)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Check if this page is in buffer pool, otherwise find a frame for this
 page, read in and pin it.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../bufmgr/BufMgr.html#unpinPage(global.PageId, boolean)">unpinPage</A></B>(global.PageId&nbsp;PageId_in_a_DB,
          boolean&nbsp;dirty)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;To unpin a page specified by a pageId.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.Object</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>equals, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="BufMgr(int, java.lang.String)"><!-- --></A><H3>
BufMgr</H3>
<PRE>
public <B>BufMgr</B>(int&nbsp;numbufs,
              java.lang.String&nbsp;replacerArg)
       throws <A HREF="../bufmgr/exception/ReplacerException.html" title="class in bufmgr.exception">ReplacerException</A></PRE>
<DL>
<DD>Constructor for BufMgr
 
 The buffer manager class, it allocates new pages for the buffer pool, pins
 and unpins the frame, frees the frame page, and uses the replacement
 algorithm to replace the page.
<P>
<DL>
<DT><B>Parameters:</B><DD><CODE>numbufs</CODE> - Number of buffers.<DD><CODE>replacerArg</CODE> - Replacer policy.
<DT><B>Throws:</B>
<DD><CODE><A HREF="../bufmgr/exception/ReplacerException.html" title="class in bufmgr.exception">ReplacerException</A></CODE></DL>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="pinPage(global.PageId, diskmgr.Page, boolean)"><!-- --></A><H3>
pinPage</H3>
<PRE>
public void <B>pinPage</B>(global.PageId&nbsp;pin_pgid,
                    <A HREF="../diskmgr/Page.html" title="class in diskmgr">Page</A>&nbsp;page,
                    boolean&nbsp;emptyPage)
             throws <A HREF="../bufmgr/exception/ReplacerException.html" title="class in bufmgr.exception">ReplacerException</A>,
                    <A HREF="../bufmgr/exception/HashOperationException.html" title="class in bufmgr.exception">HashOperationException</A>,
                    <A HREF="../bufmgr/exception/PageUnpinnedException.html" title="class in bufmgr.exception">PageUnpinnedException</A>,
                    <A HREF="../bufmgr/exception/InvalidFrameNumberException.html" title="class in bufmgr.exception">InvalidFrameNumberException</A>,
                    <A HREF="../bufmgr/exception/PageNotReadException.html" title="class in bufmgr.exception">PageNotReadException</A>,
                    <A HREF="../bufmgr/exception/BufferPoolExceededException.html" title="class in bufmgr.exception">BufferPoolExceededException</A>,
                    <A HREF="../bufmgr/exception/PagePinnedException.html" title="class in bufmgr.exception">PagePinnedException</A>,
                    <A HREF="../bufmgr/exception/BufMgrException.html" title="class in bufmgr.exception">BufMgrException</A>,
                    java.io.IOException</PRE>
<DL>
<DD>Check if this page is in buffer pool, otherwise find a frame for this
 page, read in and pin it. Also write out the old page if it's dirty
 before reading if emptyPage==TRUE, then actually no read is done to bring
 the page in.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>pin_pgid</CODE> - page number in the minibase.<DD><CODE>page</CODE> - the pointer poit to the page.<DD><CODE>emptyPage</CODE> - true (empty page); false (non-empty page)
<DT><B>Throws:</B>
<DD><CODE><A HREF="../bufmgr/exception/ReplacerException.html" title="class in bufmgr.exception">ReplacerException</A></CODE> - if there is a replacer error.
<DD><CODE><A HREF="../bufmgr/exception/HashOperationException.html" title="class in bufmgr.exception">HashOperationException</A></CODE> - if there is a hashtable error.
<DD><CODE><A HREF="../bufmgr/exception/PageUnpinnedException.html" title="class in bufmgr.exception">PageUnpinnedException</A></CODE> - if there is a page that is already unpinned.
<DD><CODE><A HREF="../bufmgr/exception/InvalidFrameNumberException.html" title="class in bufmgr.exception">InvalidFrameNumberException</A></CODE> - if there is an invalid frame number .
<DD><CODE><A HREF="../bufmgr/exception/PageNotReadException.html" title="class in bufmgr.exception">PageNotReadException</A></CODE> - if a page cannot be read.
<DD><CODE><A HREF="../bufmgr/exception/BufferPoolExceededException.html" title="class in bufmgr.exception">BufferPoolExceededException</A></CODE> - if the buffer pool is full.
<DD><CODE><A HREF="../bufmgr/exception/PagePinnedException.html" title="class in bufmgr.exception">PagePinnedException</A></CODE> - if a page is left pinned .
<DD><CODE><A HREF="../bufmgr/exception/BufMgrException.html" title="class in bufmgr.exception">BufMgrException</A></CODE> - other error occured in bufmgr layer
<DD><CODE>java.io.IOException</CODE> - if there is other kinds of I/O error.</DL>
</DD>
</DL>
<HR>

<A NAME="unpinPage(global.PageId, boolean)"><!-- --></A><H3>
unpinPage</H3>
<PRE>
public void <B>unpinPage</B>(global.PageId&nbsp;PageId_in_a_DB,
                      boolean&nbsp;dirty)
               throws <A HREF="../bufmgr/exception/ReplacerException.html" title="class in bufmgr.exception">ReplacerException</A>,
                      <A HREF="../bufmgr/exception/PageUnpinnedException.html" title="class in bufmgr.exception">PageUnpinnedException</A>,
                      <A HREF="../bufmgr/exception/HashEntryNotFoundException.html" title="class in bufmgr.exception">HashEntryNotFoundException</A>,
                      <A HREF="../bufmgr/exception/InvalidFrameNumberException.html" title="class in bufmgr.exception">InvalidFrameNumberException</A></PRE>
<DL>
<DD>To unpin a page specified by a pageId. If pincount>0, decrement it and if
 it becomes zero, put it in a group of replacement candidates. if
 pincount=0 before this call, return error.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>globalPageId_in_a_DB</CODE> - page number in the minibase.<DD><CODE>dirty</CODE> - the dirty bit of the frame
<DT><B>Throws:</B>
<DD><CODE><A HREF="../bufmgr/exception/ReplacerException.html" title="class in bufmgr.exception">ReplacerException</A></CODE> - if there is a replacer error.
<DD><CODE><A HREF="../bufmgr/exception/PageUnpinnedException.html" title="class in bufmgr.exception">PageUnpinnedException</A></CODE> - if there is a page that is already unpinned.
<DD><CODE><A HREF="../bufmgr/exception/InvalidFrameNumberException.html" title="class in bufmgr.exception">InvalidFrameNumberException</A></CODE> - if there is an invalid frame number .
<DD><CODE><A HREF="../bufmgr/exception/HashEntryNotFoundException.html" title="class in bufmgr.exception">HashEntryNotFoundException</A></CODE> - if there is no entry of page in the hash table.</DL>
</DD>
</DL>
<HR>

<A NAME="newPage(diskmgr.Page, int)"><!-- --></A><H3>
newPage</H3>
<PRE>
public global.PageId <B>newPage</B>(<A HREF="../diskmgr/Page.html" title="class in diskmgr">Page</A>&nbsp;firstpage,
                             int&nbsp;howmany)
                      throws <A HREF="../bufmgr/exception/BufferPoolExceededException.html" title="class in bufmgr.exception">BufferPoolExceededException</A>,
                             <A HREF="../bufmgr/exception/HashOperationException.html" title="class in bufmgr.exception">HashOperationException</A>,
                             <A HREF="../bufmgr/exception/ReplacerException.html" title="class in bufmgr.exception">ReplacerException</A>,
                             <A HREF="../bufmgr/exception/HashEntryNotFoundException.html" title="class in bufmgr.exception">HashEntryNotFoundException</A>,
                             <A HREF="../bufmgr/exception/InvalidFrameNumberException.html" title="class in bufmgr.exception">InvalidFrameNumberException</A>,
                             <A HREF="../bufmgr/exception/PagePinnedException.html" title="class in bufmgr.exception">PagePinnedException</A>,
                             <A HREF="../bufmgr/exception/PageUnpinnedException.html" title="class in bufmgr.exception">PageUnpinnedException</A>,
                             <A HREF="../bufmgr/exception/PageNotReadException.html" title="class in bufmgr.exception">PageNotReadException</A>,
                             <A HREF="../bufmgr/exception/BufMgrException.html" title="class in bufmgr.exception">BufMgrException</A>,
                             <A HREF="../diskmgr/exception/DiskMgrException.html" title="class in diskmgr.exception">DiskMgrException</A>,
                             java.io.IOException</PRE>
<DL>
<DD>Call DB object to allocate a run of new pages and find a frame in the
 buffer pool for the first page and pin it. If buffer is full, ask DB to
 deallocate all these pages and return error (null if error).
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>firstpage</CODE> - the address of the first page.<DD><CODE>howmany</CODE> - total number of allocated new pages.
<DT><B>Returns:</B><DD>the first page id of the new pages.
<DT><B>Throws:</B>
<DD><CODE><A HREF="../bufmgr/exception/BufferPoolExceededException.html" title="class in bufmgr.exception">BufferPoolExceededException</A></CODE> - if the buffer pool is full.
<DD><CODE><A HREF="../bufmgr/exception/HashOperationException.html" title="class in bufmgr.exception">HashOperationException</A></CODE> - if there is a hashtable error.
<DD><CODE><A HREF="../bufmgr/exception/ReplacerException.html" title="class in bufmgr.exception">ReplacerException</A></CODE> - if there is a replacer error.
<DD><CODE><A HREF="../bufmgr/exception/HashEntryNotFoundException.html" title="class in bufmgr.exception">HashEntryNotFoundException</A></CODE> - if there is no entry of page in the hash table.
<DD><CODE><A HREF="../bufmgr/exception/InvalidFrameNumberException.html" title="class in bufmgr.exception">InvalidFrameNumberException</A></CODE> - if there is an invalid frame number.
<DD><CODE><A HREF="../bufmgr/exception/PageUnpinnedException.html" title="class in bufmgr.exception">PageUnpinnedException</A></CODE> - if there is a page that is already unpinned.
<DD><CODE><A HREF="../bufmgr/exception/PagePinnedException.html" title="class in bufmgr.exception">PagePinnedException</A></CODE> - if a page is left pinned.
<DD><CODE><A HREF="../bufmgr/exception/PageNotReadException.html" title="class in bufmgr.exception">PageNotReadException</A></CODE> - if a page cannot be read.
<DD><CODE>java.io.IOException</CODE> - if there is other kinds of I/O error.
<DD><CODE><A HREF="../bufmgr/exception/BufMgrException.html" title="class in bufmgr.exception">BufMgrException</A></CODE> - other error occured in bufmgr layer
<DD><CODE><A HREF="../diskmgr/exception/DiskMgrException.html" title="class in diskmgr.exception">DiskMgrException</A></CODE> - other error occured in diskmgr layer</DL>
</DD>
</DL>
<HR>

<A NAME="freePage(global.PageId)"><!-- --></A><H3>
freePage</H3>
<PRE>
public void <B>freePage</B>(global.PageId&nbsp;globalPageId)
              throws <A HREF="../bufmgr/exception/InvalidBufferException.html" title="class in bufmgr.exception">InvalidBufferException</A>,
                     <A HREF="../bufmgr/exception/ReplacerException.html" title="class in bufmgr.exception">ReplacerException</A>,
                     <A HREF="../bufmgr/exception/HashOperationException.html" title="class in bufmgr.exception">HashOperationException</A>,
                     <A HREF="../bufmgr/exception/InvalidFrameNumberException.html" title="class in bufmgr.exception">InvalidFrameNumberException</A>,
                     <A HREF="../bufmgr/exception/PageNotReadException.html" title="class in bufmgr.exception">PageNotReadException</A>,
                     <A HREF="../bufmgr/exception/BufferPoolExceededException.html" title="class in bufmgr.exception">BufferPoolExceededException</A>,
                     <A HREF="../bufmgr/exception/PagePinnedException.html" title="class in bufmgr.exception">PagePinnedException</A>,
                     <A HREF="../bufmgr/exception/PageUnpinnedException.html" title="class in bufmgr.exception">PageUnpinnedException</A>,
                     <A HREF="../bufmgr/exception/HashEntryNotFoundException.html" title="class in bufmgr.exception">HashEntryNotFoundException</A>,
                     <A HREF="../bufmgr/exception/BufMgrException.html" title="class in bufmgr.exception">BufMgrException</A>,
                     <A HREF="../diskmgr/exception/DiskMgrException.html" title="class in diskmgr.exception">DiskMgrException</A>,
                     java.io.IOException</PRE>
<DL>
<DD>User should call this method if she needs to delete a page. this routine
 will call DB to deallocate the page.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>globalPageId</CODE> - the page number in the data base.
<DT><B>Throws:</B>
<DD><CODE><A HREF="../bufmgr/exception/InvalidBufferException.html" title="class in bufmgr.exception">InvalidBufferException</A></CODE> - if buffer pool corrupted.
<DD><CODE><A HREF="../bufmgr/exception/ReplacerException.html" title="class in bufmgr.exception">ReplacerException</A></CODE> - if there is a replacer error.
<DD><CODE><A HREF="../bufmgr/exception/HashOperationException.html" title="class in bufmgr.exception">HashOperationException</A></CODE> - if there is a hash table error.
<DD><CODE><A HREF="../bufmgr/exception/InvalidFrameNumberException.html" title="class in bufmgr.exception">InvalidFrameNumberException</A></CODE> - if there is an invalid frame number.
<DD><CODE><A HREF="../bufmgr/exception/PageNotReadException.html" title="class in bufmgr.exception">PageNotReadException</A></CODE> - if a page cannot be read.
<DD><CODE><A HREF="../bufmgr/exception/BufferPoolExceededException.html" title="class in bufmgr.exception">BufferPoolExceededException</A></CODE> - if the buffer pool is already full.
<DD><CODE><A HREF="../bufmgr/exception/PagePinnedException.html" title="class in bufmgr.exception">PagePinnedException</A></CODE> - if a page is left pinned.
<DD><CODE><A HREF="../bufmgr/exception/PageUnpinnedException.html" title="class in bufmgr.exception">PageUnpinnedException</A></CODE> - if there is a page that is already unpinned.
<DD><CODE><A HREF="../bufmgr/exception/HashEntryNotFoundException.html" title="class in bufmgr.exception">HashEntryNotFoundException</A></CODE> - if there is no entry of page in the hash table.
<DD><CODE>java.io.IOException</CODE> - if there is other kinds of I/O error.
<DD><CODE><A HREF="../bufmgr/exception/BufMgrException.html" title="class in bufmgr.exception">BufMgrException</A></CODE> - other error occured in bufmgr layer
<DD><CODE><A HREF="../diskmgr/exception/DiskMgrException.html" title="class in diskmgr.exception">DiskMgrException</A></CODE> - other error occured in diskmgr layer</DL>
</DD>
</DL>
<HR>

<A NAME="flushPage(global.PageId)"><!-- --></A><H3>
flushPage</H3>
<PRE>
public void <B>flushPage</B>(global.PageId&nbsp;pageid)
               throws <A HREF="../bufmgr/exception/HashOperationException.html" title="class in bufmgr.exception">HashOperationException</A>,
                      <A HREF="../bufmgr/exception/PageUnpinnedException.html" title="class in bufmgr.exception">PageUnpinnedException</A>,
                      <A HREF="../bufmgr/exception/PagePinnedException.html" title="class in bufmgr.exception">PagePinnedException</A>,
                      <A HREF="../bufmgr/exception/PageNotFoundException.html" title="class in bufmgr.exception">PageNotFoundException</A>,
                      <A HREF="../bufmgr/exception/BufMgrException.html" title="class in bufmgr.exception">BufMgrException</A>,
                      java.io.IOException</PRE>
<DL>
<DD>Added to flush a particular page of the buffer pool to disk
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>pageid</CODE> - the page number in the database.
<DT><B>Throws:</B>
<DD><CODE><A HREF="../bufmgr/exception/HashOperationException.html" title="class in bufmgr.exception">HashOperationException</A></CODE> - if there is a hashtable error.
<DD><CODE><A HREF="../bufmgr/exception/PageUnpinnedException.html" title="class in bufmgr.exception">PageUnpinnedException</A></CODE> - if there is a page that is already unpinned.
<DD><CODE><A HREF="../bufmgr/exception/PagePinnedException.html" title="class in bufmgr.exception">PagePinnedException</A></CODE> - if a page is left pinned.
<DD><CODE><A HREF="../bufmgr/exception/PageNotFoundException.html" title="class in bufmgr.exception">PageNotFoundException</A></CODE> - if a page is not found.
<DD><CODE><A HREF="../bufmgr/exception/BufMgrException.html" title="class in bufmgr.exception">BufMgrException</A></CODE> - other error occured in bufmgr layer
<DD><CODE>java.io.IOException</CODE> - if there is other kinds of I/O error.</DL>
</DD>
</DL>
<HR>

<A NAME="flushAllPages()"><!-- --></A><H3>
flushAllPages</H3>
<PRE>
public void <B>flushAllPages</B>()
                   throws <A HREF="../bufmgr/exception/HashOperationException.html" title="class in bufmgr.exception">HashOperationException</A>,
                          <A HREF="../bufmgr/exception/PageUnpinnedException.html" title="class in bufmgr.exception">PageUnpinnedException</A>,
                          <A HREF="../bufmgr/exception/PagePinnedException.html" title="class in bufmgr.exception">PagePinnedException</A>,
                          <A HREF="../bufmgr/exception/PageNotFoundException.html" title="class in bufmgr.exception">PageNotFoundException</A>,
                          <A HREF="../bufmgr/exception/BufMgrException.html" title="class in bufmgr.exception">BufMgrException</A>,
                          java.io.IOException</PRE>
<DL>
<DD>Flushes all pages of the buffer pool to disk
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE><A HREF="../bufmgr/exception/HashOperationException.html" title="class in bufmgr.exception">HashOperationException</A></CODE> - if there is a hashtable error.
<DD><CODE><A HREF="../bufmgr/exception/PageUnpinnedException.html" title="class in bufmgr.exception">PageUnpinnedException</A></CODE> - if there is a page that is already unpinned.
<DD><CODE><A HREF="../bufmgr/exception/PagePinnedException.html" title="class in bufmgr.exception">PagePinnedException</A></CODE> - if a page is left pinned.
<DD><CODE><A HREF="../bufmgr/exception/PageNotFoundException.html" title="class in bufmgr.exception">PageNotFoundException</A></CODE> - if a page is not found.
<DD><CODE><A HREF="../bufmgr/exception/BufMgrException.html" title="class in bufmgr.exception">BufMgrException</A></CODE> - other error occured in bufmgr layer
<DD><CODE>java.io.IOException</CODE> - if there is other kinds of I/O error.</DL>
</DD>
</DL>
<HR>

<A NAME="getNumBuffers()"><!-- --></A><H3>
getNumBuffers</H3>
<PRE>
public int <B>getNumBuffers</B>()</PRE>
<DL>
<DD>Gets the total number of buffers.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD>total number of buffer frames.</DL>
</DD>
</DL>
<HR>

<A NAME="getNumUnpinnedBuffers()"><!-- --></A><H3>
getNumUnpinnedBuffers</H3>
<PRE>
public int <B>getNumUnpinnedBuffers</B>()</PRE>
<DL>
<DD>Gets the total number of unpinned buffer frames.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD>total number of unpinned buffer frames.</DL>
</DD>
</DL>
<HR>

<A NAME="frameTable()"><!-- --></A><H3>
frameTable</H3>
<PRE>
public bufmgr.Frame[] <B>frameTable</B>()</PRE>
<DL>
<DD>A few routines currently need direct access to the FrameTable.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/BufMgr.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../index-files/index-1.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;PREV CLASS&nbsp;
&nbsp;NEXT CLASS</FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../index.html?bufmgr/BufMgr.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="BufMgr.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>

</BODY>
</HTML>
